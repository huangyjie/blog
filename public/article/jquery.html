<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jQuery - 开发指南</title>
    <meta name="description" content="jQuery 完整开发指南，包括选择器、DOM操作、事件处理、动画效果、Ajax等核心概念和最佳实践。">
    <meta name="keywords" content="jquery, javascript, DOM, ajax, 动画, 事件处理, 开发指南">
    <link rel="stylesheet" href="css/web.css">
    <link rel="icon" href="/icons/jquery.svg" type="image/svg+xml">
    <style>
        :root {
            --primary-color: #0769AD;
            --secondary-color: #7ACEF4;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        nav h2 {
            color: var(--primary-color);
        }
        
        nav ul li a:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
        }
        
        .copy-btn {
            background-color: var(--primary-color);
        }
        
        .copy-btn:hover {
            background-color: var(--secondary-color);
        }
        
        #back-to-top {
            background-color: var(--primary-color);
        }
        
        #back-to-top:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .return-home {
            background-color: var(--primary-color);
        }
        
        .return-home:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>jQuery 开发指南</h1>
            <p>从入门到进阶的 jQuery 完整指南</p>
        </div>
        
        <nav>
            <h2>目录</h2>
            <ul id="toc"></ul>
        </nav>

        <div class="section">
            <h2 id="section-1">1. 快速开始</h2>
            <div class="note">
                <strong>引入方式：</strong>
                <ul>
                    <li>CDN引入（推荐）</li>
                    <li>本地文件引入</li>
                    <li>npm安装</li>
                </ul>
            </div>
            <pre data-language="HTML"><code><span class="comment"><!-- CDN引入 --></span>
<span class="operator">&lt;script</span> src=<span class="string">"https://code.jquery.com/jquery-3.7.1.min.js"</span><span class="operator">&gt;&lt;/script&gt;</span>

<span class="comment"><!-- npm安装 --></span>
<span class="operator">npm</span> install jquery

<span class="comment">// JavaScript中导入</span>
<span class="keyword">import</span> $ from <span class="string">'jquery'</span>;</code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="section">
            <h2 id="section-2">2. 选择器</h2>
            <div class="tip">
                <strong>选择器类型：</strong>
                <ul>
                    <li>基本选择器</li>
                    <li>层级选择器</li>
                    <li>过滤选择器</li>
                    <li>属性选择器</li>
                </ul>
            </div>
            <pre data-language="JavaScript"><code><span class="comment">// 基本选择器</span>
$(<span class="string">'#id'</span>)           <span class="comment">// ID选择器</span>
$(<span class="string">'.class'</span>)        <span class="comment">// 类选择器</span>
$(<span class="string">'div'</span>)           <span class="comment">// 标签选择器</span>
$(<span class="string">'*'</span>)             <span class="comment">// 通配符选择器</span>

<span class="comment">// 层级选择器</span>
$(<span class="string">'div span'</span>)      <span class="comment">// 后代选择器</span>
$(<span class="string">'div > span'</span>)    <span class="comment">// 子元素选择器</span>
$(<span class="string">'div + p'</span>)       <span class="comment">// 相邻兄弟选择器</span>
$(<span class="string">'div ~ p'</span>)       <span class="comment">// 通用兄弟选择器</span>

<span class="comment">// 过滤选择器</span>
$(<span class="string">'li:first'</span>)      <span class="comment">// 第一个元素</span>
$(<span class="string">'li:last'</span>)       <span class="comment">// 最后一个元素</span>
$(<span class="string">'li:eq(2)'</span>)      <span class="comment">// 索引为2的元素</span>
$(<span class="string">'li:odd'</span>)        <span class="comment">// 奇数索引元素</span>

<span class="comment">// 属性选择器</span>
$(<span class="string">'[href]'</span>)        <span class="comment">// 含有href属性的元素</span>
$(<span class="string">'[href="url"]'</span>)  <span class="comment">// href等于url的元素</span>
$(<span class="string">'[href^="http"]'</span>) <span class="comment">// href以http开头的元素</span></code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="section">
            <h2 id="section-3">3. DOM操作</h2>
            <pre data-language="JavaScript"><code><span class="comment">// 内容操作</span>
$(<span class="string">'#elem'</span>).html()           <span class="comment">// 获取HTML内容</span>
$(<span class="string">'#elem'</span>).html(<span class="string">'新内容'</span>)    <span class="comment">// 设置HTML内容</span>
$(<span class="string">'#elem'</span>).text()           <span class="comment">// 获取文本内容</span>
$(<span class="string">'#elem'</span>).val()            <span class="comment">// 获取表单值</span>

<span class="comment">// 属性操作</span>
$(<span class="string">'#elem'</span>).attr(<span class="string">'src'</span>)       <span class="comment">// 获取属性</span>
$(<span class="string">'#elem'</span>).attr(<span class="string">'src'</span>, <span class="string">'url'</span>) <span class="comment">// 设置属性</span>
$(<span class="string">'#elem'</span>).removeAttr(<span class="string">'src'</span>) <span class="comment">// 删除属性</span>

<span class="comment">// 样式操作</span>
$(<span class="string">'#elem'</span>).addClass(<span class="string">'active'</span>)    <span class="comment">// 添加类</span>
$(<span class="string">'#elem'</span>).removeClass(<span class="string">'active'</span>) <span class="comment">// 删除类</span>
$(<span class="string">'#elem'</span>).toggleClass(<span class="string">'active'</span>) <span class="comment">// 切换类</span>
$(<span class="string">'#elem'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>)   <span class="comment">// 设置CSS</span>

<span class="comment">// 节点操作</span>
$(<span class="string">'#elem'</span>).append(<span class="string">'&lt;p&gt;内容&lt;/p&gt;'</span>)  <span class="comment">// 末尾添加</span>
$(<span class="string">'#elem'</span>).prepend(<span class="string">'&lt;p&gt;内容&lt;/p&gt;'</span>) <span class="comment">// 开头添加</span>
$(<span class="string">'#elem'</span>).remove()                <span class="comment">// 删除元素</span>
$(<span class="string">'#elem'</span>).empty()                 <span class="comment">// 清空内容</span></code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="section">
            <h2 id="section-4">4. 事件处理</h2>
            <pre data-language="JavaScript"><code><span class="comment">// 事件绑定</span>
$(<span class="string">'#btn'</span>).click(<span class="function">function</span>() {
  <span class="comment">// 处理点击事件</span>
});

$(<span class="string">'#elem'</span>).on(<span class="string">'click'</span>, <span class="function">function</span>(e) {
  e.preventDefault();  <span class="comment">// 阻止默认行为</span>
  <span class="comment">// 事件处理</span>
});

<span class="comment">// 事件委托</span>
$(<span class="string">'#list'</span>).on(<span class="string">'click'</span>, <span class="string">'li'</span>, <span class="function">function</span>() {
  <span class="comment">// 处理列表项点击</span>
});

<span class="comment">// 常用事件</span>
$(<span class="string">'#elem'</span>).hover(mouseEnter, mouseLeave);
$(<span class="string">'#elem'</span>).submit(<span class="function">function</span>() {});
$(<span class="string">'#elem'</span>).change(<span class="function">function</span>() {});
$(<span class="string">'#elem'</span>).keyup(<span class="function">function</span>() {});</code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="section">
            <h2 id="section-5">5. 动画效果</h2>
            <pre data-language="JavaScript"><code><span class="comment">// 基本动画</span>
$(<span class="string">'#elem'</span>).hide();                <span class="comment">// 隐藏</span>
$(<span class="string">'#elem'</span>).show();                <span class="comment">// 显示</span>
$(<span class="string">'#elem'</span>).toggle();              <span class="comment">// 切换显示/隐藏</span>

<span class="comment">// 淡入淡出</span>
$(<span class="string">'#elem'</span>).fadeIn(<span class="string">'slow'</span>);         <span class="comment">// 淡入</span>
$(<span class="string">'#elem'</span>).fadeOut(1000);         <span class="comment">// 淡出</span>
$(<span class="string">'#elem'</span>).fadeToggle();          <span class="comment">// 切换淡入/淡出</span>

<span class="comment">// 滑动</span>
$(<span class="string">'#elem'</span>).slideDown();           <span class="comment">// 向下滑动</span>
$(<span class="string">'#elem'</span>).slideUp();             <span class="comment">// 向上滑动</span>
$(<span class="string">'#elem'</span>).slideToggle();         <span class="comment">// 切换滑动</span>

<span class="comment">// 自定义动画</span>
$(<span class="string">'#elem'</span>).animate({
  opacity: 0.5,
  left: <span class="string">'+=50'</span>,
  height: <span class="string">'toggle'</span>
}, 1000, <span class="function">function</span>() {
  <span class="comment">// 动画完成回调</span>
});</code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="section">
            <h2 id="section-6">6. Ajax操作</h2>
            <div class="warning">
                <strong>注意事项：</strong>
                <ul>
                    <li>处理跨域问题</li>
                    <li>错误处理</li>
                    <li>请求超时设置</li>
                    <li>数据类型指定</li>
                </ul>
            </div>
            <pre data-language="JavaScript"><code><span class="comment">// GET请求</span>
$.get(<span class="string">'/api/data'</span>, <span class="function">function</span>(response) {
  console.log(response);
});

<span class="comment">// POST请求</span>
$.post(<span class="string">'/api/save'</span>, {
  name: <span class="string">'John'</span>,
  age: 30
}, <span class="function">function</span>(response) {
  console.log(response);
});

<span class="comment">// Ajax完整配置</span>
$.ajax({
  url: <span class="string">'/api/data'</span>,
  method: <span class="string">'POST'</span>,
  data: {
    name: <span class="string">'John'</span>,
    age: 30
  },
  dataType: <span class="string">'json'</span>,
  timeout: 5000,
  headers: {
    <span class="string">'X-Token'</span>: <span class="string">'xxx'</span>
  },
  success: <span class="function">function</span>(response) {
    console.log(response);
  },
  error: <span class="function">function</span>(xhr, status, error) {
    console.error(error);
  },
  complete: <span class="function">function</span>() {
    console.log(<span class="string">'请求完成'</span>);
  }
});</code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="section">
            <h2 id="section-7">7. 性能优化</h2>
            <pre data-language="JavaScript"><code><span class="comment">// 缓存jQuery对象</span>
<span class="keyword">const</span> $elem = $(<span class="string">'#elem'</span>);  <span class="comment">// 好的做法</span>
$(<span class="string">'#elem'</span>).hide();    <span class="comment">// 避免重复查询</span>
$elem.hide();           <span class="comment">// 推荐做法</span>

<span class="comment">// 使用事件委托</span>
$(<span class="string">'#list'</span>).on(<span class="string">'click'</span>, <span class="string">'li'</span>, handler);  <span class="comment">// 好</span>
$(<span class="string">'#list li'</span>).click(handler);              <span class="comment">// 避免</span>

<span class="comment">// 批量修改DOM</span>
<span class="keyword">const</span> $list = $(<span class="string">'#list'</span>);
$list.hide();
<span class="comment">// 批量操作</span>
$list.append(items.join(<span class="string">''</span>));
$list.show();

<span class="comment">// 使用detach()临时删除</span>
<span class="keyword">const</span> $elem = $(<span class="string">'#elem'</span>).detach();
<span class="comment">// 处理元素</span>
$(<span class="string">'#container'</span>).append($elem);</code><button class="copy-btn" onclick="copyCode(this)">复制</button></pre>
        </div>

        <div class="return-home-container">
            <button onclick="closeAndReturn()" class="return-home-button">
                <span class="button-icon">↩</span>
                <span class="button-text">返回首页</span>
            </button>
        </div>
    </div>

    <button id="back-to-top" onclick="scrollToTop()">↑</button>

    <script>
        function copyCode(button) {
            const codeBlock = button.previousElementSibling;
            const text = codeBlock.textContent.trim();

            navigator.clipboard.writeText(text).then(() => {
                button.textContent = "已复制";
                button.classList.add("copied");

                setTimeout(() => {
                    button.textContent = "复制";
                    button.classList.remove("copied");
                }, 2000);
            }).catch(err => {
                console.error('复制失败: ', err);
            });
        }

        function generateTOC() {
            const toc = document.getElementById('toc');
            const sections = document.querySelectorAll('.section h2');
            sections.forEach(section => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.textContent = section.textContent;
                a.href = `#${section.id}`;
                li.appendChild(a);
                toc.appendChild(li);
            });
        }

        window.onload = generateTOC;

        window.onscroll = function() {
            const backToTop = document.getElementById("back-to-top");
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                backToTop.classList.add("visible");
            } else {
                backToTop.classList.remove("visible");
            }
        };

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        function closeAndReturn() {
            window.location.href = '/';
            setTimeout(() => {
                window.close();
            }, 100);
        }
    </script>
</body>
</html> 